{% extends 'layouts/base.html' %}
{% block title %}Dashboard HR{% endblock %}
{% block content %}
  <nav aria-label="breadcrumb" class="mb-2">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('dashboard.main_dashboard') }}">Dashboard</a></li>
      <li class="breadcrumb-item active">HR</li>
    </ol>
  </nav>
  <div class="row g-3">
    <div class="col-md-3">
      <div class="card"><div class="card-body"><div class="text-muted">Tổng ứng viên</div><div class="fs-4 fw-bold">{{ pipeline_data.total if pipeline_data and pipeline_data.total else 0 }}</div></div></div>
    </div>
    <div class="col-md-9">
      <canvas id="pipelineChart" height="80"></canvas>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  (function(){
    var data = {{ (pipeline_data or {}) | tojson }};
    var ctx = document.getElementById('pipelineChart').getContext('2d');
    var labels = ['pending','step1_completed','step2_completed','hired','rejected'];
    var values = labels.map(l => (data[l]||0));
    new Chart(ctx, {
      type: 'bar',
      data: { labels: labels, datasets: [{ label: 'Pipeline', data: values, backgroundColor: '#0d6efd66' }] },
      options: { responsive: true, scales: { y: { beginAtZero: true }}}
    });
  })();
  </script>
{% endblock %}
