<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interviewer Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <div class="container py-4">
    <h1 class="h4 mb-3">Interviewer Dashboard</h1>

    <div class="row g-3 mb-3">
      <div class="col-md-3">
        <div class="card"><div class="card-body">
          <div class="text-muted small">Tổng đánh giá</div>
          <div class="fs-4">{{ interviewer_metrics.total_evaluations or 0 }}</div>
        </div></div>
      </div>
      <div class="col-md-3">
        <div class="card"><div class="card-body">
          <div class="text-muted small">Hoàn tất</div>
          <div class="fs-4">{{ interviewer_metrics.completed_evaluations or 0 }}</div>
        </div></div>
      </div>
      <div class="col-md-3">
        <div class="card"><div class="card-body">
          <div class="text-muted small">Điểm TB</div>
          <div class="fs-4">{{ '%.1f' % (interviewer_metrics.avg_score or 0) }}</div>
        </div></div>
      </div>
    </div>

    <h5>Đã phân công</h5>
    <div class="table-responsive mb-4">
      <table class="table table-sm table-striped">
        <thead><tr><th>Ứng viên</th><th>Giai đoạn</th><th>Ngày</th></tr></thead>
        <tbody>
          {% for ev in assigned_interviews %}
          <tr>
            <td>{{ ev.candidate.get_full_name() if ev.candidate else '-' }}</td>
            <td>{{ ev.step }}</td>
            <td>{{ ev.created_at }}</td>
          </tr>
          {% else %}
          <tr><td colspan="3" class="text-center text-muted">Không có mục</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <h5>Lịch sử đánh giá</h5>
    <div class="table-responsive">
      <table class="table table-sm table-striped">
        <thead><tr><th>Ứng viên</th><th>Điểm</th><th>Khuyến nghị</th><th>Ngày</th></tr></thead>
        <tbody>
          {% for ev in evaluation_history %}
          <tr>
            <td>{{ ev.candidate.get_full_name() if ev.candidate else '-' }}</td>
            <td>{{ ev.score }}</td>
            <td>{{ ev.recommendation or '-' }}</td>
            <td>{{ ev.created_at }}</td>
          </tr>
          {% else %}
          <tr><td colspan="4" class="text-center text-muted">Không có mục</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>


